!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).rexperlinplugin=e()}(this,(function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=r(t);if(e){var u=r(this).constructor;n=Reflect.construct(o,arguments,u)}else n=o.apply(this,arguments);return i(this,n)}}var f=function(){function e(n,r,o){t(this,e),this.x=n,this.y=r,this.z=o}return n(e,[{key:"dot2",value:function(t,e){return this.x*t+this.y*e}},{key:"dot3",value:function(t,e,n){return this.x*t+this.y*e+this.z*n}}]),e}(),a=[new f(1,1,0),new f(-1,1,0),new f(1,-1,0),new f(-1,-1,0),new f(1,0,1),new f(-1,0,1),new f(1,0,-1),new f(-1,0,-1),new f(0,1,1),new f(0,-1,1),new f(0,1,-1),new f(0,-1,-1)],c=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],s=.5*(Math.sqrt(3)-1),l=(3-Math.sqrt(3))/6,h=1/6,d=function(t){return t*t*t*(t*(6*t-15)+10)},p=function(t,e,n){return(1-n)*t+n*e},y=function(){function e(n){t(this,e),void 0===n&&(n=0),this.perm=new Array(512),this.gradP=new Array(512),this.setSeed(n)}return n(e,[{key:"setSeed",value:function(t){var e=this.perm,n=this.gradP;t>0&&t<1&&(t*=65536),(t=Math.floor(t))<256&&(t|=t<<8);for(var r=0;r<256;r++){var o;o=1&r?c[r]^255&t:c[r]^t>>8&255,e[r]=e[r+256]=o,n[r]=n[r+256]=a[o%12]}}},{key:"simplex2",value:function(t,e){var n,r,o=this.perm,i=this.gradP,u=(t+e)*s,f=Math.floor(t+u),a=Math.floor(e+u),c=(f+a)*l,h=t-f+c,d=e-a+c;h>d?(n=1,r=0):(n=0,r=1);var p=h-n+l,y=d-r+l,v=h-1+2*l,w=d-1+2*l,b=i[(f&=255)+o[a&=255]],g=i[f+n+o[a+r]],m=i[f+1+o[a+1]],P=.5-h*h-d*d,M=.5-p*p-y*y,k=.5-v*v-w*w;return 70*((P<0?0:(P*=P)*P*b.dot2(h,d))+(M<0?0:(M*=M)*M*g.dot2(p,y))+(k<0?0:(k*=k)*k*m.dot2(v,w)))}},{key:"simplex3",value:function(t,e,n){var r,o,i,u,f,a,c=this.perm,s=this.gradP,l=(t+e+n)*(1/3),d=Math.floor(t+l),p=Math.floor(e+l),y=Math.floor(n+l),v=(d+p+y)*h,w=t-d+v,b=e-p+v,g=n-y+v;w>=b?b>=g?(r=1,o=0,i=0,u=1,f=1,a=0):w>=g?(r=1,o=0,i=0,u=1,f=0,a=1):(r=0,o=0,i=1,u=1,f=0,a=1):b<g?(r=0,o=0,i=1,u=0,f=1,a=1):w<g?(r=0,o=1,i=0,u=0,f=1,a=1):(r=0,o=1,i=0,u=1,f=1,a=0);var m=w-r+h,P=b-o+h,M=g-i+h,k=w-u+2*h,x=b-f+2*h,O=g-a+2*h,j=w-1+.5,_=b-1+.5,R=g-1+.5,S=s[(d&=255)+c[(p&=255)+c[y&=255]]],E=s[d+r+c[p+o+c[y+i]]],q=s[d+u+c[p+f+c[y+a]]],z=s[d+1+c[p+1+c[y+1]]],A=.6-w*w-b*b-g*g,D=.6-m*m-P*P-M*M,T=.6-k*k-x*x-O*O,B=.6-j*j-_*_-R*R;return 32*((A<0?0:(A*=A)*A*S.dot3(w,b,g))+(D<0?0:(D*=D)*D*E.dot3(m,P,M))+(T<0?0:(T*=T)*T*q.dot3(k,x,O))+(B<0?0:(B*=B)*B*z.dot3(j,_,R)))}},{key:"perlin2",value:function(t,e){var n=this.perm,r=this.gradP,o=Math.floor(t),i=Math.floor(e);t-=o,e-=i;var u=r[(o&=255)+n[i&=255]].dot2(t,e),f=r[o+n[i+1]].dot2(t,e-1),a=r[o+1+n[i]].dot2(t-1,e),c=r[o+1+n[i+1]].dot2(t-1,e-1),s=d(t);return p(p(u,a,s),p(f,c,s),d(e))}},{key:"perlin3",value:function(t,e,n){var r=this.perm,o=this.gradP,i=Math.floor(t),u=Math.floor(e),f=Math.floor(n);t-=i,e-=u,n-=f;var a=o[(i&=255)+r[(u&=255)+r[f&=255]]].dot3(t,e,n),c=o[i+r[u+r[f+1]]].dot3(t,e,n-1),s=o[i+r[u+1+r[f]]].dot3(t,e-1,n),l=o[i+r[u+1+r[f+1]]].dot3(t,e-1,n-1),h=o[i+1+r[u+r[f]]].dot3(t-1,e,n),y=o[i+1+r[u+r[f+1]]].dot3(t-1,e,n-1),v=o[i+1+r[u+1+r[f]]].dot3(t-1,e-1,n),w=o[i+1+r[u+1+r[f+1]]].dot3(t-1,e-1,n-1),b=d(t),g=d(e),m=d(n);return p(p(p(a,h,b),p(c,y,b),m),p(p(s,v,b),p(l,w,b),m),g)}}]),e}();return function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(i,Phaser.Plugins.BasePlugin);var r=u(i);function i(e){return t(this,i),r.call(this,e)}return n(i,[{key:"start",value:function(){this.game.events.on("destroy",this.destroy,this)}},{key:"add",value:function(t){return new y(t)}}]),i}()}));
